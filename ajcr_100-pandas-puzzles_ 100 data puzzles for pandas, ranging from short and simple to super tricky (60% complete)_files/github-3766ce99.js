System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var e,t,n,s,o,a,c,r,i,d,l,u,m,p,g,f,h;return{setters:[function(r){e=r.r,t=r.q,n=r.o,s=r.l,o=r.n,a=r.a,c=r.m},function(e){r=e.I,i=e.U,d=e.o,l=e.a,u=e.R,m=e._,p=e.n,g=e.V,f=e.T,h=e.b}],execute:function(){async function j(e,n,s){const o=t(document,e),a=t(document,n);function c(e){a.hidden=e,a.open=!1,o.hidden=!e}let d;c(!0);try{d=await s.json()}catch(u){return c(!1),void r()}const l=d.json;try{await i(l.job_url)}catch(u){return c(!1),void r()}c(!1),window.location=l.export_url}async function L(e){await function(e){return new Promise((function(t){function n(){e.hasFocus()&&(t(),e.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n),window.removeEventListener("blur",n))}e.addEventListener("visibilitychange",n),window.addEventListener("focus",n),window.addEventListener("blur",n),n()}))}(document),await new Promise(e=>setTimeout(e,1e3)),e instanceof HTMLButtonElement&&(e.disabled=!1)}function v(e){e.preventDefault()}e(".js-audit-log-export-form",(async function(e,t){await j(".js-audit-log-exporting",".js-audit-log-export-menu",t)})),e(".js-audit-log-git-event-export-form",(async function(e,t){await j(".js-audit-log-git-event-exporting",".js-audit-log-git-event-export-menu",t)})),n("#js-oauth-authorize-btn",e=>{L(e)}),n("#js-manual-authorize-redirect",e=>{!async function(e){e.addEventListener("click",v),e.classList.add("text-gray"),await new Promise(e=>setTimeout(e,3e3)),e.classList.remove("text-gray"),e.removeEventListener("click",v)}(e)}),e(".js-toggler-container .js-set-approval-state",(async function(e,t){const n=s(e,".js-toggler-container");n.classList.add("loading");const o=await t.json();"approved"===o.json.approval_state?n.classList.add("on"):"denied"===o.json.approval_state&&(n.classList.add("revoked"),n.classList.remove("on")),n.classList.remove("loading")})),e(".js-request-access-approval-form",(async function(e,n){await n.text();const s=o(e,"data-container-id");t(document,`#${s}`).classList.add("on")})),a("details-menu-selected",".js-select-plan-menu",(function(e){const t=e.detail.relatedTarget,n=document.querySelectorAll(".js-plan-card-section");for(const c of n)c instanceof HTMLElement&&(c.hidden=!0);const s=e.currentTarget.querySelectorAll("[role^=menuitem]"),o=Array.from(s).indexOf(t),a=Array.from(n)[o];a instanceof HTMLElement&&(a.hidden=!1)}),{capture:!0}),n(".js-suggested-usernames-container",(function(e){const t=c(e,".js-suggested-username",HTMLInputElement),n=document.querySelector(".js-signup-form");if(n&&0!==t.length)for(const s of t)n.appendChild(s)})),d(".js-email-notice-trigger",(function(e){const t=c(document,".js-email-notice");for(const n of t)n.classList.add("notice-highlight");e.addEventListener("blur",(function(){for(const e of t)e.classList.remove("notice-highlight")}))})),n(".js-plan-choice:checked",{add(e){const t=e.closest(".plan-row");t&&t.classList.add("selected")},remove(e){const t=e.closest(".plan-row");t&&t.classList.remove("selected")}});const b=new WeakMap;function w(e){const n=e.target,o=s(n,"form");if(n.closest("input[type=text]")&&!b.get(o)){const e=t(o,".js-signup-source",HTMLInputElement);let n=e.value;e.hasAttribute("data-ga-label")&&(n=`${n}${e.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Attempt",label:n}),b.set(o,!0)}}function y(){const e=t(document,".js-password-with-confirmation",HTMLInputElement),n=t(document,".js-password-confirm",HTMLInputElement);n.value!==e.value?function(e){const t=s(e,".js-form-group");t.classList.add("errored");const n=e.getAttribute("data-validity-message");if(n){e.setCustomValidity(n);const t=s(e,"form",HTMLFormElement);g(t)}const o=t.querySelector(".error"),a=e.getAttribute("data-error-message");if(!o&&a){const e=document.createElement("dd");e.classList.add("error"),e.innerHTML=a,t.appendChild(e)}}(n):function(e){const t=s(e,".js-form-group");e.setCustomValidity(""),t.classList.remove("errored");const n=s(e,"form",HTMLFormElement);g(n);const o=t.querySelector(".error");o&&t.removeChild(o)}(n)}function E(e,t,n){const s=e.getBoundingClientRect().height,o=t.getBoundingClientRect(),a=n.getBoundingClientRect();let c=a.top;c+o.height+10>=s&&(c=Math.max(s-o.height-10,0));let r=a.right;null!=n.closest(".js-build-status-to-the-left")&&(r=Math.max(a.left-o.width-10,0)),t.style.top=`${c}px`,t.style.left=`${r}px`,t.style.right="auto"}async function T(e){const t=e.querySelector(".js-dropdown-details"),n=e.querySelector(".js-status-dropdown-menu")||e.closest(".js-status-dropdown-menu");if(!(n instanceof HTMLElement))return;const s=n.querySelector(".js-status-loader");if(!s)return;const o=n.querySelector(".js-status-loading"),a=n.querySelector(".js-status-error"),c=s.getAttribute("data-contents-url");let r;o.classList.remove("d-none"),a.classList.add("d-none");try{await f(),r=await h(document,c)}catch(i){o.classList.add("d-none"),a.classList.remove("d-none")}r&&(s.replaceWith(r),n.querySelector(".js-details-container").classList.add("open"),t&&n.classList.contains("js-append-menu-to-body")&&E(document.body,n,t))}function M(e){T(e.currentTarget)}n(".js-signup-form",{subscribe:e=>l(e,"input",w)}),a("submit",".js-signup-form-submit",(function(e){const n=e.currentTarget,s=t(n,".js-signup-source",HTMLInputElement);let o=s.value;s.hasAttribute("data-ga-label")&&(o=`${o}${s.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Submit",label:o})})),a("submit",".js-org-survey",(function(e){const t=e.currentTarget,n=c(t,".js-other-text",HTMLInputElement);for(const s of n){const e=m(s,"js-other-hidden-input");e instanceof HTMLInputElement&&(e.checked=s.value.length>0)}})),n(".js-show-next-question-trigger:checked",{constructor:HTMLElement,add(e){const t=e.closest(".js-show-next-question");if(t instanceof HTMLElement){const e=m(t,"js-hidden-question");e&&(e.hidden=!1)}},remove(e){const t=e.closest(".js-show-next-question");if(t instanceof HTMLElement){const e=m(t,"js-hidden-question");e&&(e.hidden=!0)}}}),n(".js-octocaptcha-parent",(function(e){const n=t(e,".js-octocaptcha-spinner"),s=t(e,".js-octocaptcha-success"),o=t(e,".js-octocaptcha-token",HTMLInputElement),a=t(e,".js-octocaptcha-form-submit",HTMLButtonElement),c=t(e,".js-octocaptcha-frame-container"),r=t(e,".js-octocaptcha-frame",HTMLIFrameElement),i=o.getAttribute("data-octocaptcha-url"),d=o.getAttribute("data-octocaptcha-timeout"),l=d?parseInt(d):3e4;let m=!1;const p=()=>{m||(m=!0,n.classList.add("d-none"),s.classList.remove("d-none"),f())},g=()=>{if(m)return;const t=document.createElement("input");t.type="hidden",t.id="error_loading_captcha",t.name="error_loading_captcha",t.value="1",e.appendChild(t),o.required=!1,p()},f=()=>{e.checkValidity()&&(a.disabled=!1)};setTimeout(g,l),r.addEventListener("error",g),window.addEventListener("message",e=>{if(e.origin!==i)return;const t=e.data&&e.data.event;var s;"captcha-loaded"===t?m||(m=!0,n.classList.add("d-none"),c.classList.remove("v-hidden","zero-height"),null===(s=r.contentWindow)||void 0===s||s.postMessage({event:"captcha-loaded-ack"},i||"")):"captcha-complete"===t?(o.value=e.data.sessionToken,(()=>{const e=c.getAttribute("data-ga-event-category");e&&u({category:e,action:"success",label:"captcha verified"})})(),f()):"captcha-suppressed"===t&&p()})})),n(".js-survey-answer-choice:checked",{add(e){const t=e.closest(".js-answer");if(t){const e=t.querySelector(".js-answer-choice");e&&(e.classList.remove("border-black-fade","bg-white"),e.classList.add("border-blue","bg-blue-light"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${e.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&e.classList.contains("js-other-choice")&&(n.hidden=!1)},remove(e){const t=e.closest(".js-answer");if(t){const e=t.querySelector(".js-answer-choice");e&&(e.classList.remove("border-blue","bg-blue-light"),e.classList.add("border-black-fade","bg-white"))}const n=document.querySelector(`.js-other-input-box[data-other-input-for=${e.getAttribute("data-question-short-text")}]`);n instanceof HTMLElement&&e.classList.contains("js-other-choice")&&(n.hidden=!0)}}),n(".js-allow-multiple:checked",{constructor:HTMLInputElement,add(e){const t=parseInt(e.getAttribute("data-max-choices")||""),n=s(e,".js-question"),o=c(n,".js-allow-multiple",HTMLInputElement);if(o.filter(e=>!0===e.checked).length>=t)for(const s of o)!1===s.checked&&(s.disabled=!0)},remove(e){const t=s(e,".js-question");for(const n of c(t,".js-allow-multiple",HTMLInputElement))n.disabled=!1}}),p("keyup",".js-password-with-confirmation",()=>{""!==t(document,".js-password-confirm",HTMLInputElement).value&&y()}),p("keyup",".js-password-confirm",y),a("toggle",".js-build-status .js-dropdown-details",(function(e){const t=e.currentTarget,n=t.querySelector(".js-status-dropdown-menu");function s(){t.hasAttribute("open")||a()}function o(e){n.contains(e.target)||a()}function a(){t.removeAttribute("open"),n.classList.add("d-none"),t.appendChild(n),t.removeEventListener("toggle",s),window.removeEventListener("scroll",o)}n&&(t.addEventListener("toggle",s),n.classList.contains("js-close-menu-on-scroll")&&window.addEventListener("scroll",o,{capture:!0}),n.classList.remove("d-none"),n.querySelector(".js-details-container").classList.add("open"),n.classList.contains("js-append-menu-to-body")&&(document.body.appendChild(n),E(document.body,n,t)))}),{capture:!0}),a("click",".js-status-retry",({currentTarget:e})=>{T(e)}),n(".js-build-status",{add(e){e.addEventListener("mouseenter",M,{once:!0})},remove(e){e.removeEventListener("mouseenter",M)}})}}}));
//# sourceMappingURL=github-e4db51ea.js.map
